{"status":{},"contains_secrets":true,"product_version":"3.1.0","spec":{"description":"Simple BP for working with the Nutanix Calm DSL.","resources":{"client_attrs":{"None":{"Profile":{"Default":{"Action":{},"dsl_name":"Default"}},"Deployment":{"basiclinuxvm_deployment":{"Action":{},"dsl_name":"basiclinuxvm_deployment"}},"Substrate":{"BasicLinuxVm":{"Action":{},"AhvVm":{"vm-@@{calm_array_index}@@-@@{calm_time}@@":{"dsl_name":"vmcalm_array_indexcalm_time"}},"dsl_name":"BasicLinuxVm"}},"Service":{"BasicLinux":{"Action":{},"dsl_name":"BasicLinux"}},"Package":{"CentosImage":{"Action":{},"dsl_name":"CentosImage"},"BasicLinuxPackage":{"Action":{},"dsl_name":"BasicLinuxPackage"}}}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":true,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DAG_Task_for_Service_BasicLinux_action_create","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"Runbook_for_Service_BasicLinux_action_create","main_task_local_reference":{"kind":"app_task","name":"DAG_Task_for_Service_BasicLinux_action_create"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":true,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DAG_Task_for_Service_BasicLinux_action_delete","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"Runbook_for_Service_BasicLinux_action_delete","main_task_local_reference":{"kind":"app_task","name":"DAG_Task_for_Service_BasicLinux_action_delete"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":true,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DAG_Task_for_Service_BasicLinux_action_start","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"Runbook_for_Service_BasicLinux_action_start","main_task_local_reference":{"kind":"app_task","name":"DAG_Task_for_Service_BasicLinux_action_start"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":true,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DAG_Task_for_Service_BasicLinux_action_stop","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"Runbook_for_Service_BasicLinux_action_stop","main_task_local_reference":{"kind":"app_task","name":"DAG_Task_for_Service_BasicLinux_action_stop"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":true,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DAG_Task_for_Service_BasicLinux_action_restart","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"Runbook_for_Service_BasicLinux_action_restart","main_task_local_reference":{"kind":"app_task","name":"DAG_Task_for_Service_BasicLinux_action_restart"},"variable_list":[]},"name":"action_restart"},{"description":"System action for deleting an application. Does not delete created VMs","type":"system","critical":true,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DAG_Task_for_Service_BasicLinux_action_soft_delete","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"Runbook_for_Service_BasicLinux_action_soft_delete","main_task_local_reference":{"kind":"app_task","name":"DAG_Task_for_Service_BasicLinux_action_soft_delete"},"variable_list":[]},"name":"action_soft_delete"}],"depends_on_list":[],"name":"BasicLinux","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"BasicLinuxVm","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"admin"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{}}}},"os_type":"Linux","create_spec":{"name":"vm-@@{calm_array_index}@@-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"Primary","uuid":"3b6477b0-2cdb-4a3b-9ee8-d93563738959"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":1024,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: @@{admin.username}@@\n    ssh-authorized-keys:\n      - @@{InstancePublicKey}@@\n      - @@{admin.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\n"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"24beaac4-5024-4d96-9b93-d9bbf520f645","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"CentosImage","uuid":"288eb91b-989a-44f2-b836-9dcc78deca58"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"admin","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":true,"secret_reference":{}},"value":"gSLTcccKDuXYAcKvh6DP7OLR2AkzHd3aLUKUAe1gLfBUccTUF8okCkzcZ7QqKjR8xekBXbbyVyuGK023ORU9JphHBIpHm9c+XVjk5Th4KfBCs60O4Vds0rhalCpDHILWzKPk1MYcRPGop4DQwJQ\/q3+UoNYqEejL6OBeysy\/373zfmcKMBGDvblDdN6k\/wrv4WNSCNUw6azqFT7YBTsQ6h7ha0xSpcorqBSgSl2dMa5hC4nZweLOSjTjuzc+bAZhTAri4Rw4IeWAfVcIxX\/wOn6dDga6\/lp7opoDzdMGAT9OFoXS1jd5+Yk4T459I3QrwpnZu70rEhkeVnPWGiyf3Dcyai0YUHHY2SJrJsNcpn7BFGdB8UlPQwh23qQVMFnGkIUNNjKDOaDH0Pc+dCn5D91DrZ++tunLWm+\/W72gyuLOhP8eFsbw908JaPVXnSCJ3NZfbsyFuexD5EUsARjWAEJjKNmVTn6YodPrfhVGgcZaEFGe1zQf6iF6LoQuTAgV1EtQcXYHlDyNIcIaNlUef6hzPii1dswn86UwZiPS5hDi3K1HnCeZy3uE2\/pg\/hw8rcWVzRd1SGXbS+75XW0kiw6MjjeW+3YW9wFF+G+WfVUpQKsqtnACBP4VTpuecBEz8EYSy8zbr63WqjUYrWT6CXPA+Qu5QnJu6sJDExIrMY+GqJwRwEb2Bs3m+HCvmobdK37PZpE8bU0acNTZHFsCM1Ixrb+xWB3ta2y1xLd701fD8tED77FPl9cq9o4CM1w8c8S0Dxx53+AOpkbjIsfu14fjj1iAWSsVaV5F24Ekhy7l1Bp1SKCSJkpZY6mERmoqNIshK7Nql0wZ9YPFUNlA5siFcb6mHtfVEgeiOTCtVgaY5zU6+Atm69QZWoZysUXqr41zJJAUWqlW+zOiN5ZZmC7GFcA\/wMUx7\/WPwMFgcxAlzas5ZC6vvHN3ChP4ZoSNvAwZIfPOSpiUUScEPMWKg+Bb9H8dsGNPSnzg0TJWSFUWyMslOYlFK8NA9WL2AWz0ADviRvTbomAQHEvkUJkSv6ZuoZxrChAUQjBAkcomctcgMB2Kw7O55sh9elcDm1r7GFn8z6Bp5\/E0m8x3mmXKZ9jK\/zNLk2BeYc+qmb+XLR1HORwLS77OdM+zoXUM7lCGlS2DwVXxf35sNvITHY+yj3eJ\/fcXb6Vjp8Yv8LWQ\/aeWDLKtqP4NN0PhjTitu9VXyPuWxfpJ0avnqax\/l4On6SVNeIK9cYDn9ehsSyAm9ImVnJfIBEmzCHY+4ZS9ITadY8iqaRQ\/nBnYsVOtO15lPOj6fyJfY37pSTGBUMqPc4U4A+luD89glv6QYGyULCclPSH7adurslJqYizNP5fqSpL9G5+rwCEgzLmnKLY+mSfNfEGvgF2YpeYD4StIY5zhghBF0EsS7Oc6HzEDBwgz50jROXB98rDEy7iGzuEllMpqMzNiP3kCelkTV42f+S7X4YxNcZ8ngbyii54FN02vQSMih\/zuSjYUmJcKcLyywWtDMkzgXIVNt4XZOevD\/sdJJ0mr+kMnUsd8PQl9FUUINqPmu\/thfuMw7VJuoEZDXemgVy1y9tYcOhMnxwhJgJMxDm7fvx74BsDyEhE9hmZ3P\/yrQBn79nboeX7iVuP4EHtCPlSu6xaW93E75E9QJd66a3jpyadDVznV1K2sifUa66W+\/0fM1uvyeDBeiIo2u7zQ4rlWzfWvZMX7xbUnzFXdsIKp0QaQYDQX24Fxbt8BPUpTRtw46x+31diqOTIdFKLpeUm683QseOzksDyXbmf0w7Rug7ivuD4M\/rChYbspL\/Jjbbr+sWx3M0JX1XeFDp5nBYl45ZmXmoUTUQitQLgdPVo8LQJBTTRjoqtvoC8zpMWWvMf\/bb2m7aI7lC4zgH0Knf9BFUECbaEx2Ykir86xeaD54MOIxP2uii3IUNHEbORvJkvkaGMx4c2Yf4TGPyBpcBtxc\/0I2+5ldE8cKevDcIYnjnhv9120RAQEM+qJllKk8JYdi4bVqbW4Dmpqb5N60Fsu7Zhpg5m1yCKR27NpQVmYLGn2ebbmykdMBA7Ux7DxjLwrBjb\/kv\/Hcg9\/ySKDVDsYqd9hsws3XKWaIlxSblvD5X5mJOa\/0Kez1x\/qqyBWAEEx0+T8WpMZSrbq5tJiaSWoJROnuvhUJ4dZF\/A2\/BpClORiv5FYdwXlzSIBuxSMiqH2TGtIOb8\/2HVUO7b\/fjTpJcxH4g+a8wSWJd1Jm0rSVIpyoETkhVHYzzsguQL2hnM+bYsjK04vXnL+eCZvSTIzbUAJ5vEWWKSOe2l+TsoT0mUYpfBZeOMcYKZ1bzPrgbS5ro+PK7VzXBEaefzXQ1v+0xctzMuSlrPtB5H833xOBVzjraI20kqeV3PDoiUv3NjYQXck+6ToUi6PSAltaKV8VI4aaLvwZAPuDYoDDm7ouA9tVSt7pa4hvm+RIQZi0sRRW9vjDQqg4+qBBKRsZ41SXjRm8PwEE4o44Q3xIcZSNXoQlUcTGj\/XwGBDOJZGm\/toI1Z6V9SY7lVD+HEFzkKmUbhFFoSsZdY\/komE+Gn3CZNTEicipXTjfNgigaCaC9h754X2pLaMrdeb+rwN3clsILTKj+mPfZJ1eMweEIa41KxnP5kw6loFgiMjU6zqhTF3c2tmHGNTC25B1zOs7Wg9+yvMpa9vyWLh0Dgp+Hn3grpmHWw9aDt2ppVogy+dF6N1QgCiJEqLH8dNiHGhlCBZquhnfhlRJ7nE7bEU6eZs8bOYXJn5NZtNXvaKGUB54FS1ODToQVu1N4e7x6D4Q8FGh8QINrUWgZ32J5VecVqVIVtZ4UsHRKYGNpfiog19zvUDZJRRvARMlCAczRB7Wb67MuQhqNLHgZ133c88U2LbAFKIk5vo+BQBWaFgD\/2QPEbFbrEwYnqZ6Nbfxua55seCpfLL5n3VOkBictnw6Iv73xL3nvnvKKWJeuBxRz8+jkTbxqP8y6BHqwBTI6abVXLmePs3X5NH0HyudQAFQYscPpbeXS+zO3HdpUPGgzrsYr5BLT\/2n9OeuT4uyfYOAzS7RLnn4FCdeK\/K72wGO7k7LGLPi12cgvm90JIeUg1vMjuHRNDovI9ru2S4gWXxxttu5I6JbTlxvwirOqpSEdmZ+n5ppBw4fvpHHkLd2J\/hYoQo50duqOgax4ccuE5gya285pwWfA0SbVtCkbTWmOw4a7FF0CoI3IMf9uCLkKxRcm+bR54TvmzS+S8qDX+Xxv9PCBt54EMRW1zIVFLSFpCFiU3\/vQ2SQCbrvkhlx7p2283ahs57ptX0M8kJVJA5nxC8PQIinOUwtxE309xJ0BkKUx\/5Q6bHoAE8\/sQpAEMILlv77Ijjo3RBZur6e5S51WRXIkRmXJvHcItO3KXd7JMf87brTGE\/uXm4uN9Hm3Xsnnca\/7\/Zr\/IAEih1xTlMCsmcj2WJNk75ng1SNc+wH8SRmiUnMvgZpzexn9nI0AcSt3bdafVWmqECvL5+OEkK5bpE9MhoOw9IOmUl6u2oP2Rte6QLg8U3CzvQly4n8Ie5KEFkJA65PssZtYYkKlv5\/ww1AwFhX2\/hxmG5ya2W+tLqPzCYUUJ6GxQp4pjmdZ+3DZFsLV5uirc+3Q7oF8\/GV11zPPzrlC+TbkDyVoedLaeZHWe1CMqpGJ1LE389lgcPZ6y3ExS+ju7o8zvyxSiw0O+JaeXsOpVf6L1zWxWgnFIAR6KpfPu\/MTb+9PzDpaSJjIxXXD+Gdx5An\/LzBLTbPJDl65deID5eXcFNeB1\/lmxnng2S4JTwPXq\/HIt+5mrOibiQwbXgtNeqXbPgvKGAxhecAH8V24D381DjbdwuULnfQjr2mHsQUJUrAg4iABnY7vvwepHEvXp1GJh7gwHEZJlIri3wc8aojhI4CyI3NArCLZycfgox09YDRorIqc6Z3H8xUbLZj0zoSVqOwUV+b2XeCQYsgkkc\/WyGFu\/ACAr0kLVmo0IEejdfhjIPet25PXHYHLj5VOOCDp0vrGO3Ng3zZuw7gZWFapKAofDDE9GrLyet0YspXb0hIfGO1+7sItgigqf6XOtJWig4NXHaUJtUW1CQGIiKa8RWeNXejdPgHvP5\/Xib3JSwfKVC0Hh5dr0AiYeFsgTbynBK4jrdAXNRVJ5r1p5nV8ZfgtDUx9OADyJ4i3dKIitEPOav3Y607+4rLoWnvdxbrgbgoGnZhvyBkSwKXLbvBhCHbQ06hEtEcD5GYIz6\/hM2WYp6d7NO7KTMHsiKuS4GBJDAXSmLZNAqQ1I6XKIkknLziw\/3OPrm5WTD+Hj9Cf2u2kMvVyIyQYOHWnyIPxUkTz106INA0lEs6OSWI3e1y7PILIPjE4XmvFBhXFsvEg==:utf-8"},"name":"admin"}],"package_definition_list":[{"description":"","action_list":[],"type":"CUSTOM","service_local_reference_list":[{"kind":"app_service","name":"BasicLinux"}],"name":"BasicLinuxPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"ConfigureBaseVM"},{"kind":"app_task","name":"ConfigureFirewall"}],"name":"BasicLinuxPackage___install___dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"ConfigureBaseVM"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"ConfigureFirewall"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ConfigureBaseVM","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n# update base OS packages\nsudo yum -y update\nsudo yum -y upgrade\n\n# install some useful packages\nsudo yum -y install vim git\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"admin"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ConfigureFirewall","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\n# install and enable firewalld\nsudo yum -y install firewalld\nsudo systemctl enable firewalld\nsudo systemctl start firewalld\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"admin"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"BasicLinuxPackage___install___runbook","main_task_local_reference":{"kind":"app_task","name":"BasicLinuxPackage___install___dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"BasicLinux"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DAG_Task_for_Package_BasicLinuxPackage_action_uninstall","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"Runbook_for_Package_BasicLinuxPackage_action_uninstall","main_task_local_reference":{"kind":"app_task","name":"DAG_Task_for_Package_BasicLinuxPackage_action_uninstall"},"variable_list":[]}},"variable_list":[]},{"description":"https:\/\/cloud.centos.org\/centos\/7\/images\/","action_list":[],"type":"SUBSTRATE_IMAGE","service_local_reference_list":[],"name":"CentosImage","version":"","options":{"type":"","name":"CentOS-7.8-2003","resources":{"image_type":"DISK_IMAGE","checksum":{"checksum_algorithm":"","type":"","checksum_value":""},"source_uri":"https:\/\/cloud.centos.org\/centos\/7\/images\/CentOS-7-x86_64-GenericCloud-2003.qcow2","version":{"product_version":"7.8","type":"","product_name":"CentOS"},"architecture":"X86_64","type":""},"description":""},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"basiclinuxvm_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"BasicLinuxPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"BasicLinuxVm"},"options":{"type":""},"variable_list":[],"description":""}],"description":"","action_list":[],"name":"Default","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"InstancePublicKey","value":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQD486FNEscDkK4xqyvT5Syg+z2pjvJVp7ndBGcq3jhS8SFcelgsam2H3wHnV\/ybH3dxc8a+Qd1RdACCqT5F+798BJj8XOjOAktI35yQd8Hh8jmUAHzmwh8QUGgFKnmsyI7aX3DLFmHrfp31LlHFuiNNCw9vW1V9klfTXDxuqwC243qgGNYqgeCbHMBHW21Ou+YhuZKAaacNuhgtaE5uw8kmCbg2KJTgxVSzcac3WU1Jih59fS5xIox6nEAGwQeo3jsBg2QT5oZLgBA4uo+ZHoxysbVaabd2XpEi+Pzf2NYJl6cYomAq2uNmieWBe0FPsBPPL8rmbG+qyg\/EDfBWJuXjE5\/eqDTbeb9\/csRaXF94nhRgpMpBlcP7kVmeHmq4OeImbZbu9hWjO81VLss7L9MSaPK4Cl1ULXGO0NswtVqXlSz4tdSjpuYt4hSW1o2Hh58QMqoBmKAa+tw5PvpaMuVyRbklRFBmoBN9t6hb3tUDQwYLlO6FU73Ixhp8sPQelpcwtlh\/SSAvncyEVOku65pJ8a0WfrmLCSIx4\/KKbXH09eOY2T\/U6BeFDXsorXFwN2\/vaGJXB0HCMYI+RhG\/vaj5BsJ4GL8iHBiXG7A7MEQel4j6UWzThFFZpBz+B2gs+aJrtf3pqYABWmLepn1rd049gCixyMnuPDo6+H7FD+GD6w== no-reply@acme.com","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"admin"},"type":"USER"},"name":"BasicLinuxVM"},"api_version":"3.0","metadata":{"last_update_time":"1607906661576630","kind":"blueprint","spec_version":8,"creation_time":"1597302209717229","name":"BasicLinuxVM"}}